(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-gifts"],{"0dff":function(t,i,e){"use strict";e.r(i);var n=e("1577"),o=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},1577:function(t,i,e){"use strict";e("6a54"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("4626"),e("5ac7");var n={data:function(){return{discount:"",rate:"",card_name:"",buy_price:100,pay_price:100,discount_price:0,can_click:!0,notice_show:!1,notice_today:!1,noticeList:[]}},onLoad:function(){this.getConfig(),this.getNotice()},methods:{getConfig:function(){var t=this;uni.showLoading({title:"加载中",mask:!0}),this.$request("get","api/index/cardConf").then((function(i){uni.hideLoading(),i.code&&(t.discount=i.data.discount,t.rate=i.data.rate,t.priceChange())}))},getNotice:function(){var t=this;this.$request("get","api/notice/noticeList",{type:5}).then((function(i){i.code&&(t.noticeList=i.data.data,t.notice_today=!i.data.show,t.notice_show=i.data.show&&0!=i.data.data.length)}))},noticeSubmit:function(){var t=this;uni.showLoading({title:"加载中",mask:!0}),this.$request("post","api/notice/todayShow",{type:5,show:this.notice_today?1:2}).then((function(i){uni.hideLoading(),t.notice_show=!1}))},checkboxGroupChange:function(t){this.notice_today=t.includes("1")},priceChange:function(){var t=1;""!==this.discount&&(t=this.discount/10),this.pay_price=(this.buy_price*t).toFixed(3),this.discount_price=(this.buy_price-this.pay_price).toFixed(3)},confirmSubmit:function(){var t=this;return!1===this.can_click?uni.$u.toast("正在购买中..."):(this.can_click=!1,uni.showLoading({title:"购买中",mask:!0}),!this.buy_price||this.buy_price<=0?(this.can_click=!0,uni.hideLoading(),uni.$u.toast("请正确输入购买金额")):this.card_name?void this.$request("post","api/consumeRecharge/cardRecharge",{name:this.card_name,buy_price:this.buy_price,discount:this.discount,pay_price:this.pay_price}).then((function(i){t.can_click=!0,uni.hideLoading(),i.code?uni.$u.toast("购买成功"):uni.$u.toast(i.msg)})):(this.can_click=!0,uni.hideLoading(),uni.$u.toast("请正确输入礼品卡卡名")))}}};i.default=n},"4e49":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var n={uPopup:e("3c96").default,uCheckboxGroup:e("df27").default,uCheckbox:e("ccab").default},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticStyle:{padding:"30rpx"}},[e("v-uni-view",{staticStyle:{padding:"30rpx","box-shadow":"0rpx 6rpx 32rpx 2rpx rgba(0,0,0,0.08)","border-radius":"32rpx"}},[e("v-uni-view",{staticStyle:{"font-weight":"400","font-size":"24rpx"}},[t._v("输入礼品卡卡名")]),e("v-uni-view",{staticStyle:{height:"80rpx","margin-top":"12rpx",background:"#F6F7F9","border-radius":"24rpx",display:"flex","align-items":"center",width:"100%"}},[e("v-uni-view",{staticStyle:{width:"100%","margin-left":"34rpx"}},[e("v-uni-input",{attrs:{type:"text",placeholder:"请输入","placeholder-style":"font-weight: 400;font-size: 30rpx;color: #B7BAC7;width: 100%"},model:{value:t.card_name,callback:function(i){t.card_name=i},expression:"card_name"}})],1)],1),e("v-uni-view",{staticStyle:{"font-weight":"400","font-size":"24rpx","margin-top":"26rpx"}},[t._v("输入购买金额")]),e("v-uni-view",{staticStyle:{height:"80rpx","margin-top":"12rpx",background:"#F6F7F9","border-radius":"24rpx",display:"flex","align-items":"center",width:"100%"}},[e("v-uni-view",{staticStyle:{width:"100%","margin-left":"34rpx"}},[e("v-uni-input",{attrs:{placeholder:"请输入","placeholder-style":"font-weight: 400;font-size: 30rpx;color: #B7BAC7;width: 100%"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.priceChange.apply(void 0,arguments)}},model:{value:t.buy_price,callback:function(i){t.buy_price=t._n(i)},expression:"buy_price"}})],1)],1)],1),e("v-uni-view",{staticStyle:{"margin-top":"50rpx",display:"flex","flex-wrap":"wrap","justify-content":"space-between"}},[e("v-uni-view",{staticStyle:{"font-weight":"bold","font-size":"32rpx"}},[t._v("实付金额")]),e("v-uni-view",{staticStyle:{display:"flex","align-items":"center"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.notice_show=!0}}},[e("v-uni-view",{staticStyle:{"font-weight":"400","font-size":"24rpx",color:"#A9ABB6"}},[t._v("注意事项")]),e("v-uni-view",{staticStyle:{"margin-left":"10rpx"}},[e("v-uni-image",{staticStyle:{width:"24rpx",height:"24rpx"},attrs:{src:"/static/jy-yw.png",mode:""}})],1)],1)],1),e("v-uni-view",{staticStyle:{"margin-top":"26rpx",height:"100rpx",background:"#F6F7F9","border-radius":"24rpx",display:"flex","justify-content":"space-between","align-items":"center","padding-left":"30rpx","padding-right":"30rpx"}},[e("v-uni-view",[e("span",{staticStyle:{"font-weight":"bold","font-size":"40rpx"}},[t._v("¥")]),e("span",{staticStyle:{"margin-left":"14rpx","font-weight":"bold","font-size":"40rpx"}},[t._v(t._s(t.pay_price))])]),e("v-uni-view",[e("v-uni-image",{staticStyle:{width:"33rpx",height:"33rpx"},attrs:{src:"/static/index-huaf-bianj.png",mode:""}})],1)],1),""!==t.discount?e("v-uni-view",{staticStyle:{"margin-top":"40rpx",display:"flex","justify-content":"space-between"}},[e("v-uni-view",{staticStyle:{"font-weight":"400","font-size":"28rpx",color:"#757B8C"}},[t._v("优惠信息")]),e("v-uni-view",{staticStyle:{"font-weight":"bold","font-size":"28rpx",color:"#000000"}},[t._v(t._s(t.discount)+"折 优惠"+t._s(t.discount_price)+"Y币")])],1):t._e(),e("v-uni-view",{staticStyle:{"margin-top":"36rpx",display:"flex","justify-content":"space-between"}},[e("v-uni-view",{staticStyle:{"font-weight":"400","font-size":"28rpx",color:"#757B8C"}},[t._v("参考汇率")]),e("v-uni-view",{staticStyle:{"font-weight":"bold","font-size":"28rpx",color:"#000000"}},[t._v(t._s(t.rate))])],1),e("v-uni-view",{staticStyle:{"margin-top":"36rpx",display:"flex","justify-content":"space-between","align-items":"center"}},[e("v-uni-view",{staticStyle:{"font-weight":"400","font-size":"28rpx",color:"#757B8C"}},[t._v("合计支付")]),e("v-uni-view",{staticStyle:{"font-weight":"bold","font-size":"36rpx",color:"#EB8E26"}},[t._v(t._s(t.pay_price)+" Y币")])],1),e("v-uni-view",{staticStyle:{"margin-top":"60rpx",height:"80rpx",background:"#3742C5","border-radius":"32rpx","font-weight":"bold","font-size":"28rpx",color:"#FFFFFF","text-align":"center","line-height":"80rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.confirmSubmit.apply(void 0,arguments)}}},[t._v("确认充值")]),e("u-popup",{attrs:{show:t.notice_show,mode:"center",round:32,closeable:!0},on:{close:function(i){arguments[0]=i=t.$handleEvent(i),t.notice_show=!1}}},[e("v-uni-view",{staticStyle:{width:"560rpx",background:"white","border-radius":"32rpx"}},[e("v-uni-view",{staticStyle:{height:"78rpx",background:"#E3E8FF","border-radius":"32rpx 32rpx 0rpx 0rpx","font-weight":"bold","font-size":"30rpx","line-height":"78rpx","text-align":"center"}},[t._v("温馨提示")]),e("v-uni-view",{staticStyle:{padding:"34rpx"}},[e("v-uni-view",{staticStyle:{color:"#757B8C","font-size":"28rpx",width:"100%","margin-top":"38rpx"}},[t._l(t.noticeList,(function(i,n){return e("v-uni-view",{key:n},[e("v-uni-view",{staticStyle:{color:"#000000"}},[t._v(t._s(i.title))]),e("v-uni-view",{staticStyle:{padding:"2rpx"}},[t._v(t._s(i.content))]),e("br")],1)})),e("v-uni-view",[e("u-checkbox-group",{staticStyle:{display:"grid","place-items":"center"},attrs:{placement:"column"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.checkboxGroupChange.apply(void 0,arguments)}}},[t.notice_today?e("u-checkbox",{key:"1",attrs:{checked:!0,label:"今天不再显示",name:"1"}}):e("u-checkbox",{key:"1",attrs:{label:"今天不再显示",name:"1"}})],1)],1)],2),e("v-uni-view",{staticStyle:{"margin-top":"30rpx"}},[e("v-uni-view",{staticStyle:{width:"100%",height:"80rpx",background:"#3742C5","border-radius":"18rpx","font-weight":"bold","font-size":"28rpx",color:"#FFFFFF","text-align":"center","line-height":"80rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.noticeSubmit.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],1)],1)},a=[]},9450:function(t,i,e){"use strict";e.r(i);var n=e("4e49"),o=e("0dff");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);var c=e("828b"),r=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"7baa8ef1",null,!1,n["a"],void 0);i["default"]=r.exports}}]);